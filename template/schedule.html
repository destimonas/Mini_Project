<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Schedule</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: #ffffff;
            color: #d92cf9;
        }
        .fitup-logo {
            font-size: 24px;
        }
        .back-button {
            font-size: 16px;
        }
        .error-message {
            color: red;
        }
    </style>
</head>
<body>

<div class="header">
    <!-- FitUp Logo -->
    <div class="fitup-logo">
        FITUP
    </div>
    {% if trainer.is_authenticated %}
    <a class="header">Welcome {{ trainer.username }}</a>
    {% endif %}
    <!-- Back Button -->
    <div class="back-button">
        <a href="{% url 'trainerhome' %}" class="btn btn-light">Back</a>
    </div>
</div>

<div class="container">
    <h2 class="mt-4 mb-4">Workout Schedule</h2>

    <form id="schedule-form" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <!-- Workout Date and Time -->
        <div class="mb-4">
            <label for="workout-date-time" class="form-label">Select Workout Date and Time:</label>
            <input class="form-control" type="datetime-local" id="workout-date-time" name="workout-date-time">
            <p id="date-time-error" class="error-message"></p>
        </div>
		<label for="week">Select Week:</label>
        <select id="week" name="week" class="form-select mb-3">
            <option value="">Select</option>
            <option value="week1" {% if submitted_week == 'week1' %} selected {% endif %}>Week 1</option>
            <option value="week2" {% if submitted_week == 'week2' %} selected {% endif %}>Week 2</option>
            <option value="week3" {% if submitted_week == 'week3' %} selected {% endif %}>Week 3</option>
            <option value="week4" {% if submitted_week == 'week4' %} selected {% endif %}>Week 4</option>
            <option value="week5" {% if submitted_week == 'week5' %} selected {% endif %}>Week 5</option>
            <option value="week6" {% if submitted_week == 'week6' %} selected {% endif %}>Week 6</option>
            <option value="week7" {% if submitted_week == 'week7' %} selected {% endif %}>Week 7</option>
            <option value="week8" {% if submitted_week == 'week8' %} selected {% endif %}>Week 8</option>
            <option value="week9" {% if submitted_week == 'week9' %} selected {% endif %}>Week 9</option>
            <option value="week10" {% if submitted_week == 'week10' %} selected {% endif %}>Week 10</option>
            <option value="week11" {% if submitted_week == 'week11' %} selected {% endif %}>Week 11</option>
            <option value="week12" {% if submitted_week == 'week12' %} selected {% endif %}>Week 12</option>
        </select>


        <!-- Workout Name Dropdown -->
        <div class="mb-4">
            <label for="workout-name" class="form-label">Select Workout Name:</label>
            <select class="form-control" id="workout-name" name="workout-name">
                <option value="">Select Workout Name</option>
                {% for workout in workouts %}
                <option value="{{ workout.id }}">{{ workout.workout_name }}</option>
                {% endfor %}
            </select>
            <p id="workout-name-error" class="error-message"></p>
        </div>

        <!-- Meet Link -->
        <div class="mb-4">
            <label for="meet-link" class="form-label">Meet Link:</label>
            <input class="form-control" type="text" id="meet-link" name="meet-link">
            <p id="meet-link-error" class="error-message"></p>
        </div>

        <!-- Additional Notes -->
        <div class="mb-4">
            <label for="additional-notes" class="form-label">Additional Notes:</label>
            <textarea class="form-control" id="additional-notes" name="additional-notes" rows="4"></textarea>
			<p id="additional-notes-error" class="error-message"></p>
        </div>

        <!-- Submit Button -->
        <button type="button" onclick="validateForm()" class="btn btn-primary">Schedule Class</button>
    </form>
</div>

<!-- Bootstrap and jQuery Scripts -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function validateForm() {
        var isValid = true;

        // Validate Workout Date and Time
        var dateTimeInput = document.getElementById('workout-date-time');
        var dateTimeError = document.getElementById('date-time-error');
        if (dateTimeInput.value === '') {
            isValid = false;
            dateTimeError.innerText = 'Please select a workout date and time.';
        } else {
            dateTimeError.innerText = '';
        }

        // Validate Workout Name
        var workoutNameInput = document.getElementById('workout-name');
        var workoutNameError = document.getElementById('workout-name-error');
        if (workoutNameInput.value === '') {
            isValid = false;
            workoutNameError.innerText = 'Please select a workout name.';
        } else {
            workoutNameError.innerText = '';
        }

        // Validate Meet Link
        var meetLinkInput = document.getElementById('meet-link');
        var meetLinkError = document.getElementById('meet-link-error');
        var meetLinkPattern = /^https:\/\/meet\.google\.com\/[a-z0-9-]+$/i;
        if (meetLinkInput.value === '' || !meetLinkPattern.test(meetLinkInput.value)) {
            isValid = false;
            meetLinkError.innerText = 'Please enter a valid Meet link';
        } else {
            meetLinkError.innerText = '';
        }
        // Validate Additional Notes (allow alphanumeric, spaces, hyphens, and slashes)
        var additionalNotesInput = document.getElementById('additional-notes');
        var additionalNotesError = document.getElementById('additional-notes-error');
        var additionalNotesPattern = /^[a-zA-Z0-9\s\-\/]*$/;
        if (!additionalNotesPattern.test(additionalNotesInput.value)) {
            isValid = false;
            additionalNotesError.innerText = 'Additional notes should only contain alphanumeric characters, spaces, hyphens, and slashes.';
        } else {
            additionalNotesError.innerText = '';
        }

        // Submit the form if valid
        if (isValid) {
            document.getElementById('schedule-form').submit();
        }
    }
</script>

</body>
</html>
