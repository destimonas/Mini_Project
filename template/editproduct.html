{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .header {
            background-color: #6f42c1;
            color: #fff;
            text-align: center; /* Center the content horizontally and vertically */
            padding: 1px;
            position: relative;
            height: 15vh; /* Set the header's height to the viewport height */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0;
        }
       </style>
    <div class="header">
        <h2><center>Edit product</center></h2>
        <a href="{% url 'dashboardbase' %}" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);">Back</a>
    </div>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE-edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="shortcut icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">
   
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}" />
    <!-- Font Awesome styles -->
    <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" />
    <!-- jQuery UI CSS for the date picker -->
    <link rel="stylesheet" type="text css" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!-- Custom styles for this template -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet" />
    <!-- Responsive style -->
    <link href="{% static 'css/responsive.css' %}" rel="stylesheet">
    <style>
        .back-button {
            text-decoration: none;
            color: #333; /* Set the color you prefer */
            margin-left: 1200px; /* Add margin to the right of the icon */
        }
        /* Add custom CSS styles here */
#product-image-preview {
    max-width: 200px; /* Set the maximum width for the image */
    max-height: 200px; /* Set the maximum height for the image */
}

        /* Add custom CSS styles here */
        .container {
            max-width: 800px;
            margin-top: 50px;
            margin-left: 50 px;
            padding: 20px;
            background-color: #f4f4f4;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        h1 {
            text-align: center;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input[type="text"],
        input[type="file"],
        select {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button[type="submit"] {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #2ecc71;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
        }

        button[type="submit"]:hover {
            background-color: #2ecc71;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">


</head>

    <body class="sub_page"> 
       
        
    <div class="container">
       
        <form method="post" enctype="multipart/form-data">

            {% csrf_token %}
            <!-- Edit Product Form Fields -->
            <label for="product-name">Product Name</label>
            <input type="text" name="product-name" value="{{ product.product_name }}" required>

            <label for="category-name">Category Name</label>
            <select name="category-name" id="category-name" required onchange="updateSubcategoryOptions()">
                <option value="">Select</option>
                <option value="YogaAccessories" {% if product.category == "YogaAccessories" %}selected{% endif %}>Yoga Accessories</option>
                <option value="StrengthTrainingEquipment" {% if product.category == "StrengthTrainingEquipment" %}selected{% endif %}>Strength Training Equipment</option>
                <option value="CardioEquipment" {% if product.category == "CardioEquipment" %}selected{% endif %}>Cardio Equipment</option>
                <option value="FitnessGadgets" {% if product.category == "FitnessGadgets" %}selected{% endif %}>Fitness Gadgets</option>
                <option value="GymAccessories" {% if product.category == "GymAccessories" %}selected{% endif %}>Gym Accessories</option>
                <!-- Add other category options as needed -->
            </select>

            <label for="subcategory-name">Subcategory Name</label>
            <select name="subcategory-name" id="subcategory-name" required>
                <!-- Subcategory options will be added dynamically here -->
            </select>
            
            <!-- Other form fields -->
            <label for="stock">Stock</label>
            <input type="number" name="stock" value="{{ product.stock }}" required>

            <label for="description">Description</label>
            <textarea name="description" required>{{ product.description }}</textarea>

            <label for="price">Product Price</label>
            <input type="number" name="price" value="{{ product.price }}" required>

            <label for="discount">Discount (%)</label>
            <input type="number" name="discount" value="{{ product.discount }}" oninput="calculateSalePrice()">


            <label for="sale-price">Sale Price</label>
            <input type="number" name="sale-price" value="{{ product.sale_price }}" readonly>

            <button type="submit">Update Product</button>
        </form>
    </div>

    <script>
        function updateSubcategoryOptions() {
            const categoryDropdown = document.getElementById("category-name");
            const subcategoryDropdown = document.getElementById("subcategory-name");
            const selectedCategory = categoryDropdown.value;
            const subcategoryOptions = {
                YogaAccessories: ["Yoga Mats", "Yoga Blocks", "Yoga Straps"],
                StrengthTrainingEquipment: ["Dumbbells", "Resistance Bands"],
                CardioEquipment: ["Jump Rope", "Exercise Ball"],
                FitnessGadgets: ["Fitness Tracker"],
                GymAccessories: ["Workout Gloves"]
            };
        
            // Clear existing options
            subcategoryDropdown.innerHTML = "";
        
            // Add new options based on the selected category
            if (subcategoryOptions[selectedCategory]) {
                for (const option of subcategoryOptions[selectedCategory]) {
                    const optionElement = document.createElement("option");
                    optionElement.value = option;
                    optionElement.textContent = option;
                    subcategoryDropdown.appendChild(optionElement);
                }
            }
        }
        

        // Initial call to populate subcategories based on the initial selected category
        updateSubcategoryOptions();

        <!-- Add this to your HTML file inside the <head> section -->
           
                // Function to calculate the sale price
                function calculateSalePrice() {
                    const priceInput = document.querySelector('input[name="price"]');
                    const discountInput = document.querySelector('input[name="discount"]');
                    const salePriceInput = document.querySelector('input[name="sale-price"]');
                    
                    const price = parseFloat(priceInput.value);
                    const discount = parseFloat(discountInput.value);
            
                    // Check if both price and discount are valid numbers
                    if (!isNaN(price) && !isNaN(discount)) {
                        const salePrice = price - (price * (discount / 100));
                        salePriceInput.value = salePrice.toFixed(2); // Display with 2 decimal places
                    } else {
                        salePriceInput.value = ""; // Clear the sale price if inputs are invalid
                    }
                }
                
                // Initial call to calculate sale price when the page loads
                window.addEventListener('load', calculateSalePrice);
            
    </script>
</body>
</html>